task-generation
===============

A tool to return interesting, randomized input-output (IO) examples for learning list routines.

Strategy
--------

Strategy: attempts to construct useful IO examples using a constraint propagation technique from the DeepCoder paper (https://arxiv.org/abs/1611.01989), as well as maximizing output variance via de-duplication.

Usage
-----

Example usage:
```
❯ time ./taskg --maxv 10 --max-bound 10
program:  a <- [int] | b <- head a
i: [[7, 1, 0, 4, 8, 0, 2]]             o: 7
i: [[7, 6, 7, 4, 0, 1, 5, 6, 3]]       o: 7
i: [[6, 1, 3, 5, 3, 4, 6]]             o: 6
i: [[4, 3, 3, 9, 4, 0, 0, 4, 8]]       o: 4
i: [[9, 9, 5, 3]]                      o: 9
i: [[1, 5, 2, 1, 6, 9, 0]]             o: 1
i: [[1, 3, 9]]                         o: 1
i: [[4, 6, 5, 0, 7, 5]]                o: 4
i: [[5, 0, 6, 6, 4, 6, 0, 3, 0]]       o: 5
i: [[5, 1, 9, 1, 5, 2, 2, 1]]          o: 5

program:  a <- [int] | b <- tail a
i: [[9, 3, 3, 4, 1, 0]]             o: [3, 3, 4, 1, 0]
i: [[4, 8, 2, 5, 1, 8, 9]]          o: [8, 2, 5, 1, 8, 9]
i: [[1, 2, 5]]                      o: [2, 5]
i: [[8, 2, 0, 2, 2]]                o: [2, 0, 2, 2]
i: [[0]]                            o: []
i: [[7, 1, 5, 0, 9, 4]]             o: [1, 5, 0, 9, 4]
i: [[9, 3]]                         o: [3]
i: [[4, 1, 7, 6, 3, 2, 9, 3]]       o: [1, 7, 6, 3, 2, 9, 3]
i: [[4, 8, 7, 4, 3, 5, 8, 1]]       o: [8, 7, 4, 3, 5, 8, 1]
i: [[8, 7, 6, 2, 4, 4, 6, 1]]       o: [7, 6, 2, 4, 4, 6, 1]

program:  a <- [int] | b <- tail a | c <- head a | d <- count c b
i: [[5, 4]]                            o: 0
i: [[9, 1, 7, 8, 9, 3, 3, 8]]          o: 1
i: [[8, 9, 8, 8, 9, 1]]                o: 2
i: [[8, 7, 9, 9, 3, 8, 8, 9, 8]]       o: 3
i: [[2, 1, 1, 2, 2, 2, 2, 4]]          o: 4
i: [[0, 0, 0, 6, 0, 0, 8, 0]]          o: 5
i: [[4, 4, 0, 3, 7, 6, 2, 4]]          o: 2
i: [[8, 7, 8, 9, 2, 8, 8, 8, 8]]       o: 5
i: [[9]]                               o: 0
i: [[4, 9, 1, 2, 7, 6, 8, 0]]          o: 0

program:  a <- [int] | b <- tail a | c <- len a | d <- count c b
i: [[9, 1]]                            o: 0
i: [[1, 2, 0, 3, 3, 7, 9, 5, 7]]       o: 1
i: [[0, 7, 0, 5, 5]]                   o: 2
i: [[9, 7, 0, 7, 2, 7, 4]]             o: 3
i: [[4, 2, 8, 1, 8, 7, 8, 8]]          o: 4
i: [[4, 1, 9, 9, 9, 5, 9, 8, 9]]       o: 5
i: [[3, 9, 3, 9, 9, 1, 9, 8, 9]]       o: 5
i: [[5, 4, 0, 9, 9, 3, 8, 1]]          o: 1
i: [[7, 7, 0, 1, 4, 3, 6, 7, 0]]       o: 0
i: [[7, 4]]                            o: 0

program:  a <- [int] | b <- tail a | c <- last a | d <- count c b
i: [[5, 0]]                            o: 1
i: [[8, 8, 4, 1, 7, 4]]                o: 2
i: [[1]]                               o: 0
i: [[7, 1, 1, 4, 1, 6, 7, 3, 1]]       o: 4
i: [[3, 0, 1, 7, 4, 7, 4, 4, 7]]       o: 3
i: [[2, 2, 4, 7, 2, 2, 2, 8, 2]]       o: 5
i: [[2, 9, 6, 2, 6, 6, 6, 2, 6]]       o: 5
i: [[0]]                               o: 0
i: [[1]]                               o: 0
i: [[6, 0, 1, 8, 1, 8, 7, 7]]          o: 2

program:  a <- [int] | b <- tail a | c <- len b | d <- count c b
i: [[8, 4, 0, 8, 1]]                   o: 1
i: [[0, 7, 4, 0]]                      o: 0
i: [[4, 7, 8, 8, 1, 0, 1, 4, 2]]       o: 2
i: [[4, 9, 0, 7, 7, 7, 3, 6]]          o: 3
i: [[1, 6, 7, 6, 7, 7, 7, 4]]          o: 4
i: [[3, 8, 2, 3, 6, 8, 8, 8, 8]]       o: 5
i: [[0, 8, 9, 8, 8, 8, 7, 2, 8]]       o: 5
i: [[0, 3, 2, 1, 9, 0, 7, 3]]          o: 1
i: [[5, 0, 3, 4, 9, 0]]                o: 0
i: [[8, 6, 7, 7]]                      o: 0

program:  a <- [int] | b <- tail a | c <- head b | d <- count c b
i: [[4, 9]]                            o: 1
i: [[2, 9, 3, 9, 8, 6]]                o: 2
i: [[3]]                               o: 0
i: [[2, 1, 4, 1, 1, 9, 3, 2, 8]]       o: 3
i: [[0, 4, 1, 4, 8, 4, 8, 4]]          o: 4
i: [[7, 6, 6, 6, 6, 6, 9, 1, 1]]       o: 5
i: [[3]]                               o: 0
i: [[9, 5, 1]]                         o: 1
i: [[9, 1, 1, 2]]                      o: 2
i: [[7, 4, 4, 4, 0, 7, 4, 4, 4]]       o: 6

program:  a <- [int] | b <- tail a | c <- last b | d <- count c b
i: [[6, 5, 4, 9, 8, 2, 4, 0]]          o: 1
i: [[3, 5, 5, 3, 8, 5]]                o: 3
i: [[8, 9, 9]]                         o: 2
i: [[4]]                               o: 0
i: [[6, 8, 7, 8, 8, 2, 8]]             o: 4
i: [[7, 4, 2, 2, 3, 0, 2, 2, 2]]       o: 5
i: [[8]]                               o: 0
i: [[3, 1, 0, 3, 7, 8]]                o: 1
i: [[3, 7, 7, 4, 7, 7, 6, 7]]          o: 5
i: [[1]]                               o: 0

program:  a <- [int] | b <- tail a | c <- tail b | d <- tail c | e <- head d | f <- count e a
i: [[5, 5, 2, 2]]                      o: 2
i: [[3, 7, 3, 3, 2]]                   o: 3
i: [[3, 2, 1, 5, 2, 8]]                o: 1
i: [[7, 5, 4]]                         o: 0
i: [[0, 8, 2, 0, 9, 0, 0, 8, 3]]       o: 4
i: [[0, 5, 2, 0, 8, 0, 7, 0, 0]]       o: 5
i: [[8, 5, 6, 3, 0, 2, 3, 0]]          o: 2
i: [[1, 9, 9, 9, 9, 9, 9]]             o: 6
i: [[9, 2, 7, 1, 2]]                   o: 1
i: [[4, 5, 9]]                         o: 0

program:  a <- int | b <- [int] | c <- count a b
i: [0, [5]]                               o: 0
i: [7, [3, 6, 6, 4, 7]]                   o: 1
i: [8, [8, 3, 8, 8]]                      o: 3
i: [2, [2, 2, 1, 6]]                      o: 2
i: [7, [2, 0, 7, 7, 7, 2, 9, 7, 6]]       o: 4
i: [4, [4, 4, 1, 4, 4, 2, 4, 5]]          o: 5
i: [7, [2, 9, 7, 7, 7, 7, 5, 7]]          o: 5
i: [7, [2, 7]]                            o: 1
i: [7, [3, 6, 0, 8, 3, 0]]                o: 0
i: [5, [0, 2, 1, 6, 4, 8, 6, 8]]          o: 0

./taskg --maxv 10 --max-bound 10  4.61s user 0.13s system 107% cpu 4.424 total
```

Higher bounds (for input/output values) increase the runtime:
```
❯ time ./taskg --maxv 99 --max-bound 99
program:  a <- [int] | b <- head a
i: [[8, 9]]                              o: 8
i: [[2, 6, 7, 0, 33]]                    o: 2
i: [[3, 9, 9, 8, 4, 60, 9, 23, 1]]       o: 3
i: [[1]]                                 o: 1
i: [[2, 13, 9, 66, 5, 9, 6, 1]]          o: 2
i: [[8, 7, 1]]                           o: 8
i: [[5, 4, 3]]                           o: 5
i: [[8, 5, 2]]                           o: 8
i: [[98, 4, 9, 8, 5]]                    o: 98
i: [[8, 2]]                              o: 8

program:  a <- [int] | b <- tail a
i: [[72]]                               o: []
i: [[3, 6, 32, 5, 7, 9, 6, 9, 8]]       o: [6, 32, 5, 7, 9, 6, 9, 8]
i: [[26, 76, 7, 6, 6, 43]]              o: [76, 7, 6, 6, 43]
i: [[11, 4]]                            o: [4]
i: [[49]]                               o: []
i: [[1, 2, 8, 0, 2, 4, 4, 66, 8]]       o: [2, 8, 0, 2, 4, 4, 66, 8]
i: [[0, 8, 5, 0, 76, 73]]               o: [8, 5, 0, 76, 73]
i: [[2, 9, 4, 3, 5, 7, 8]]              o: [9, 4, 3, 5, 7, 8]
i: [[7, 2, 23, 37, 9]]                  o: [2, 23, 37, 9]
i: [[6]]                                o: []

program:  a <- [int] | b <- tail a | c <- head a | d <- count c b
i: [[5]]                             o: 0
i: [[7, 5, 9, 7, 7, 3, 61]]          o: 2
i: [[7, 0, 7]]                       o: 1
i: [[5, 5, 5, 5, 0, 7, 4, 1]]        o: 3
i: [[8, 8, 18, 2, 8, 7, 8, 8]]       o: 4
i: [[7, 7, 0, 7, 7, 7, 7, 4]]        o: 5
i: [[77, 1, 2, 4, 4, 4, 0, 5]]       o: 0
i: [[9, 1, 0, 9, 6, 6, 9, 3]]        o: 2
i: [[5, 0, 6, 55, 5]]                o: 1
i: [[2, 9, 7, 2, 2]]                 o: 2

program:  a <- [int] | b <- tail a | c <- len a | d <- count c b
i: [[5, 70, 1, 2, 84, 5, 5, 7]]         o: 0
i: [[0, 2, 4, 8, 4, 1, 4, 9]]           o: 1
i: [[3, 2, 21, 91, 2, 8, 8, 9]]         o: 2
i: [[6, 8, 8, 41, 4, 8, 6, 23]]         o: 3
i: [[96, 5, 8, 8, 8, 5, 8, 9]]          o: 4
i: [[1, 9, 9, 9, 8, 9, 9, 6, 5]]        o: 5
i: [[8, 3, 5]]                          o: 1
i: [[2]]                                o: 0
i: [[7, 7, 7, 4, 3, 9, 2]]              o: 2
i: [[9, 9, 9, 2, 84, 9, 9, 9, 9]]       o: 6

program:  a <- [int] | b <- tail a | c <- last a | d <- count c b
i: [[59, 6, 4, 5, 5, 5, 1, 5]]          o: 4
i: [[82, 5, 6]]                         o: 1
i: [[2]]                                o: 0
i: [[7, 4, 4, 2, 1, 5, 3, 5]]           o: 2
i: [[3, 0, 3, 49, 2, 7, 5, 0, 0]]       o: 3
i: [[1, 8, 8, 8, 8, 4, 8]]              o: 5
i: [[9, 3, 3, 1, 37, 3, 3, 3]]          o: 5
i: [[4]]                                o: 0
i: [[6, 7, 3, 0, 1, 86, 4, 2, 2]]       o: 2
i: [[0]]                                o: 0

program:  a <- [int] | b <- tail a | c <- len b | d <- count c b
i: [[2, 3, 7, 4, 3, 8, 4, 82]]          o: 1
i: [[3, 8, 0, 6]]                       o: 0
i: [[0, 6, 0, 5, 7, 8, 8, 5, 5]]        o: 2
i: [[9, 6, 1, 8, 16, 3, 8, 8, 2]]       o: 3
i: [[7, 8, 9, 7, 5, 8, 8, 8, 6]]        o: 4
i: [[5, 7, 4, 7, 7, 2, 7, 7]]           o: 5
i: [[2, 9, 7, 7, 72, 9, 46, 1]]         o: 2
i: [[3, 2, 7, 7, 5, 6]]                 o: 1
i: [[6, 4, 8, 7]]                       o: 0
i: [[5, 4, 3, 6]]                       o: 1

program:  a <- [int] | b <- tail a | c <- head b | d <- count c b
i: [[9, 9, 7, 9, 19, 2]]                o: 2
i: [[0, 6, 0, 2]]                       o: 1
i: [[20]]                               o: 0
i: [[4, 8, 9, 3, 0, 5, 8, 8]]           o: 3
i: [[7, 0, 4, 0, 0, 92, 1, 0, 1]]       o: 4
i: [[7, 6, 6, 6, 6, 9, 4, 6, 0]]        o: 5
i: [[4, 4, 5, 79, 7, 4, 4, 7]]          o: 3
i: [[4]]                                o: 0
i: [[7, 2, 2, 0, 2, 42, 2, 2, 9]]       o: 5
i: [[3]]                                o: 0

program:  a <- [int] | b <- tail a | c <- last b | d <- count c b
i: [[2, 25, 6, 3, 5, 7, 5, 8]]            o: 1
i: [[67, 1, 9, 69, 4, 1, 4]]              o: 2
i: [[6]]                                  o: 0
i: [[62, 7, 8, 6, 8, 84, 52, 1, 8]]       o: 3
i: [[4, 6, 1, 6, 7, 6, 1, 6]]             o: 4
i: [[4, 82, 7, 7, 5, 7, 2, 7, 7]]         o: 5
i: [[3]]                                  o: 0
i: [[7, 2, 7, 6, 1, 2]]                   o: 2
i: [[3]]                                  o: 0
i: [[95, 1, 1, 2, 1, 7, 1, 1]]            o: 5

program:  a <- [int] | b <- tail a | c <- tail b | d <- tail c | e <- head d | f <- count e a
i: [[61, 4, 81]]                          o: 0
i: [[7, 7, 3, 8, 4]]                      o: 1
i: [[3, 4, 9, 5, 5, 6, 8, 4]]             o: 2
i: [[7, 1, 9, 9, 6, 9, 6]]                o: 3
i: [[7, 37, 10, 7, 34, 6, 5, 7, 7]]       o: 4
i: [[9, 9, 2, 9, 9, 8, 7, 9]]             o: 5
i: [[4, 2, 5, 1, 6, 8, 2]]                o: 1
i: [[6, 0, 6]]                            o: 0
i: [[4, 2, 3, 4, 4, 4, 4]]                o: 5
i: [[7, 5, 8]]                            o: 0

program:  a <- int | b <- [int] | c <- count a b
i: [5, [9, 7, 4, 4]]                         o: 0
i: [8, [3, 8]]                               o: 1
i: [5, [4, 5, 9, 8, 7, 0, 8, 5]]             o: 2
i: [7, [6, 7, 3, 3, 7, 0, 7, 2]]             o: 3
i: [1, [33, 1, 1, 7, 3, 6, 1, 9, 1]]         o: 4
i: [9, [78, 9, 52, 6, 9, 76, 9, 9, 9]]       o: 5
i: [9, [1, 9]]                               o: 1
i: [0, [8, 0, 0, 17, 0, 0, 5, 3, 0]]         o: 5
i: [4, [3]]                                  o: 0
i: [36, [4]]                                 o: 0

./taskg --maxv 99 --max-bound 99  38.44s user 0.19s system 100% cpu 38.374 total
```

Same with higher example numbers (`-n`):
```
❯ time ./taskg -n 100 > ioexamples.txt

./taskg -n 100 > ioexamples.txt  68.85s user 0.19s system 100% cpu 1:08.80 total
```

Run `./taskg -h` for a complete list of parameterized settings.

References
----------

 1. https://arxiv.org/pdf/1611.01989.pdf
 2. https://www.biorxiv.org/content/10.1101/321505v1
